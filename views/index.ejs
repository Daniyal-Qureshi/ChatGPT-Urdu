<meta charset="UTF-8" />
<title>Urdu ChatGPT</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
<link
  href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
  rel="stylesheet"
  integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD"
  crossorigin="anonymous"
/>
<link href="style.css" rel="stylesheet" />
<script src="home.js" type="module"></script>

<div class="d-flex justify-content-between m-3">
  <div class="w-25">
    <h1 class="mt-2">Urdu ChatGPT</h1>
    <a class="btn btn-primary fs-5" href="/remove"> Remove API Key </a>
  </div>
  <form method="post" action="/open" class="w-75">
    <div class="d-flex align-items-end m-2" style="min-height: 90vh">
      <div class="w-100 m-3">
        <% responses.map((response) => { %>
        <h4 class="mt-2"><%= response.question %></h4>
        <div
          class="card border p-2"
          style="background-color: rgba(247, 247, 248)"
        >
          <h4 class="answer"><%= response.answer %></h4>
        </div>
        <% }); %> <% if(error) { %>
        <div class="alert alert-danger fs-4" role="alert"><%= error %></div>
        <% } %>
        <textarea
          name="prompt"
          class="form-control mt-3 fs-4"
          id="target"
          rows="1"
          required="true"
          oninput="this.style.height = ''; this.style.height = this.scrollHeight +'px'"
        ></textarea>
        <button type="submit" class="btn btn-primary mt-3 fs-4">Submit</button>
      </div>
    </div>
  </form>
</div>
<script>
  let elements = document.getElementsByClassName("answer");
  for (let element of elements) element.innerHTML = element.innerText;

  if ("<%= error %>" == "Please provide the API Key") {
    let API_KEY = prompt("Please Enter your API KEY");
    if (API_KEY) {
      window.location = `/set/${API_KEY}`;
    }
  }
</script>
